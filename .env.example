# ----- Core -----
TZ=UTC
NEXTCLOUD_HOST=nextcloud.example.com
NEXTCLOUD_TRUSTED_DOMAINS=nextcloud.example.com
OVERWRITEPROTOCOL=https

# Initial admin (only used on first install)
NEXTCLOUD_ADMIN_USER=admin
NEXTCLOUD_ADMIN_PASSWORD=change-me

# Traefik ACME email (required for Let's Encrypt)
TRAEFIK_ACME_EMAIL=you@example.com

# SQLite DB file inside the Nextcloud data dir
SQLITE_DB=owncloud.db

# ----- Redis (locking/cache) -----
# Hostname of Redis container in the compose network
REDIS_HOST=redis
# Optional: override port (default 6379)
# REDIS_HOST_PORT=6379
# IMPORTANT: Set a password when using Redis.
# The Nextcloud image uses Redis for PHP sessions when REDIS_HOST is set.
# If REDIS_PASSWORD is empty, PHP may try to AUTH with an empty password and
# sessions can fail, causing login loops. Set a strong password here.
REDIS_PASSWORD=change-me

# ----- Object Store (Primary) -----
# Backblaze B2 (or S3-compatible) settings used by Nextcloud primary object store.
# These are consumed by the startup hook script and/or initial install.
OBJECTSTORE_S3_BUCKET=your-bucket-name
OBJECTSTORE_S3_REGION=eu-central-003
OBJECTSTORE_S3_HOST=s3.eu-central-003.backblazeb2.com
OBJECTSTORE_S3_PORT=443
OBJECTSTORE_S3_KEY=your-b2-key-id
OBJECTSTORE_S3_SECRET=your-b2-application-key
OBJECTSTORE_S3_SSL=true
OBJECTSTORE_S3_USEPATH_STYLE=true
OBJECTSTORE_S3_LEGACYAUTH=false
OBJECTSTORE_S3_AUTOCREATE=true
# Optional: force reapplying objectstore config if already present (true/false)
OBJECTSTORE_FORCE=false
# Optional: override object prefix used by Nextcloud object store
# OBJECTSTORE_S3_OBJECT_PREFIX=urn:oid:

# ----- Litestream (B2 credentials) -----
# Used by litestream and litestream-init containers.
AWS_REGION=eu-central-003
LITESTREAM_ACCESS_KEY_ID=your-b2-key-id
LITESTREAM_SECRET_ACCESS_KEY=your-b2-application-key

# Optional: path prefix for Litestream replicas in the bucket
LITESTREAM_REPLICA_PREFIX=litestream-sqlite

# ----- SMTP (first install via env, later via occ) -----
# Only applied on first install by Nextcloud entrypoint. For existing instances,
# use occ commands to update (see README).
SMTP_HOST=
SMTP_SECURE= # ssl or tls (STARTTLS), or leave empty
SMTP_PORT=   # 465 for ssl, 587 for tls, 25 for plain
SMTP_AUTHTYPE=LOGIN # or PLAIN
SMTP_NAME=
SMTP_PASSWORD=
MAIL_FROM_ADDRESS=
MAIL_DOMAIN=
